(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.BlockstoreLevel = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var BlockstoreLevel=(()=>{var Do=Object.create;var kt=Object.defineProperty;var Po=Object.getOwnPropertyDescriptor;var Vo=Object.getOwnPropertyNames;var qo=Object.getPrototypeOf,jo=Object.prototype.hasOwnProperty;var w=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),An=(r,e)=>{for(var t in e)kt(r,t,{get:e[t],enumerable:!0})},Bn=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Vo(e))!jo.call(r,i)&&i!==t&&kt(r,i,{get:()=>e[i],enumerable:!(n=Po(e,i))||n.enumerable});return r};var pr=(r,e,t)=>(t=r!=null?Do(qo(r)):{},Bn(e||!r||!r.__esModule?kt(t,"default",{value:r,enumerable:!0}):t,r)),$o=r=>Bn(kt({},"__esModule",{value:!0}),r);var Sn=w((_c,Ln)=>{"use strict";function Fn(r,e){for(let t in e)Object.defineProperty(r,t,{value:e[t],enumerable:!0,configurable:!0});return r}function Ko(r,e,t){if(!r||typeof r=="string")throw new TypeError("Please pass an Error to err-code");t||(t={}),typeof e=="object"&&(t=e,e=""),e&&(t.code=e);try{return Fn(r,t)}catch{t.message=r.message,t.stack=r.stack;let i=function(){};return i.prototype=Object.create(Object.getPrototypeOf(r)),Fn(new i,t)}}Ln.exports=Ko});var Jn=w((of,Wn)=>{var je=1e3,$e=je*60,Ke=$e*60,xe=Ke*24,Cs=xe*7,Ts=xe*365.25;Wn.exports=function(r,e){e=e||{};var t=typeof r;if(t==="string"&&r.length>0)return Is(r);if(t==="number"&&isFinite(r))return e.long?Bs(r):As(r);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(r))};function Is(r){if(r=String(r),!(r.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(r);if(e){var t=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return t*Ts;case"weeks":case"week":case"w":return t*Cs;case"days":case"day":case"d":return t*xe;case"hours":case"hour":case"hrs":case"hr":case"h":return t*Ke;case"minutes":case"minute":case"mins":case"min":case"m":return t*$e;case"seconds":case"second":case"secs":case"sec":case"s":return t*je;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function As(r){var e=Math.abs(r);return e>=xe?Math.round(r/xe)+"d":e>=Ke?Math.round(r/Ke)+"h":e>=$e?Math.round(r/$e)+"m":e>=je?Math.round(r/je)+"s":r+"ms"}function Bs(r){var e=Math.abs(r);return e>=xe?Ut(r,e,xe,"day"):e>=Ke?Ut(r,e,Ke,"hour"):e>=$e?Ut(r,e,$e,"minute"):e>=je?Ut(r,e,je,"second"):r+" ms"}function Ut(r,e,t,n){var i=e>=t*1.5;return Math.round(r/t)+" "+n+(i?"s":"")}});var Qn=w((sf,Xn)=>{function Fs(r){t.debug=t,t.default=t,t.coerce=a,t.disable=o,t.enable=i,t.enabled=s,t.humanize=Jn(),t.destroy=l,Object.keys(r).forEach(c=>{t[c]=r[c]}),t.names=[],t.skips=[],t.formatters={};function e(c){let h=0;for(let d=0;d<c.length;d++)h=(h<<5)-h+c.charCodeAt(d),h|=0;return t.colors[Math.abs(h)%t.colors.length]}t.selectColor=e;function t(c){let h,d=null,g,p;function y(...b){if(!y.enabled)return;let v=y,I=Number(new Date),R=I-(h||I);v.diff=R,v.prev=h,v.curr=I,h=I,b[0]=t.coerce(b[0]),typeof b[0]!="string"&&b.unshift("%O");let C=0;b[0]=b[0].replace(/%([a-zA-Z%])/g,(M,L)=>{if(M==="%%")return"%";C++;let D=t.formatters[L];if(typeof D=="function"){let Me=b[C];M=D.call(v,Me),b.splice(C,1),C--}return M}),t.formatArgs.call(v,b),(v.log||t.log).apply(v,b)}return y.namespace=c,y.useColors=t.useColors(),y.color=t.selectColor(c),y.extend=n,y.destroy=t.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(g!==t.namespaces&&(g=t.namespaces,p=t.enabled(c)),p),set:b=>{d=b}}),typeof t.init=="function"&&t.init(y),y}function n(c,h){let d=t(this.namespace+(typeof h>"u"?":":h)+c);return d.log=this.log,d}function i(c){t.save(c),t.namespaces=c,t.names=[],t.skips=[];let h,d=(typeof c=="string"?c:"").split(/[\s,]+/),g=d.length;for(h=0;h<g;h++)d[h]&&(c=d[h].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.slice(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function o(){let c=[...t.names.map(u),...t.skips.map(u).map(h=>"-"+h)].join(",");return t.enable(""),c}function s(c){if(c[c.length-1]==="*")return!0;let h,d;for(h=0,d=t.skips.length;h<d;h++)if(t.skips[h].test(c))return!1;for(h=0,d=t.names.length;h<d;h++)if(t.names[h].test(c))return!0;return!1}function u(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}function a(c){return c instanceof Error?c.stack||c.message:c}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}Xn.exports=Fs});var Zn=w((S,Rt)=>{S.formatArgs=Ss;S.save=Os;S.load=ks;S.useColors=Ls;S.storage=Ns();S.destroy=(()=>{let r=!1;return()=>{r||(r=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();S.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Ls(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Ss(r){if(r[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+r[0]+(this.useColors?"%c ":" ")+"+"+Rt.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;r.splice(1,0,e,"color: inherit");let t=0,n=0;r[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(t++,i==="%c"&&(n=t))}),r.splice(n,0,e)}S.log=console.debug||console.log||(()=>{});function Os(r){try{r?S.storage.setItem("debug",r):S.storage.removeItem("debug")}catch{}}function ks(){let r;try{r=S.storage.getItem("debug")}catch{}return!r&&typeof process<"u"&&"env"in process&&(r=process.env.DEBUG),r}function Ns(){try{return localStorage}catch{}}Rt.exports=Qn()(S);var{formatters:Us}=Rt.exports;Us.j=function(r){try{return JSON.stringify(r)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var ni=w(ri=>{"use strict";ri.supports=function(...e){let t=e.reduce((n,i)=>Object.assign(n,i),{});return Object.assign(t,{snapshots:t.snapshots||!1,permanence:t.permanence||!1,seek:t.seek||!1,clear:t.clear||!1,getMany:t.getMany||!1,keyIterator:t.keyIterator||!1,valueIterator:t.valueIterator||!1,iteratorNextv:t.iteratorNextv||!1,iteratorAll:t.iteratorAll||!1,status:t.status||!1,createIfMissing:t.createIfMissing||!1,errorIfExists:t.errorIfExists||!1,deferredOpen:t.deferredOpen||!1,promises:t.promises||!1,streams:t.streams||!1,encodings:Object.assign({},t.encodings),events:Object.assign({},t.events),additionalMethods:Object.assign({},t.additionalMethods)})}});var K=w((eh,ii)=>{"use strict";ii.exports=class extends Error{constructor(e,t){super(e||""),typeof t=="object"&&t!==null&&(t.code&&(this.code=String(t.code)),t.expected&&(this.expected=!0),t.transient&&(this.transient=!0),t.cause&&(this.cause=t.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}});var ui=w(Mt=>{"use strict";Mt.byteLength=Ps;Mt.toByteArray=qs;Mt.fromByteArray=Ks;var Y=[],P=[],Ds=typeof Uint8Array<"u"?Uint8Array:Array,Cr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(be=0,oi=Cr.length;be<oi;++be)Y[be]=Cr[be],P[Cr.charCodeAt(be)]=be;var be,oi;P[45]=62;P[95]=63;function si(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function Ps(r){var e=si(r),t=e[0],n=e[1];return(t+n)*3/4-n}function Vs(r,e,t){return(e+t)*3/4-t}function qs(r){var e,t=si(r),n=t[0],i=t[1],o=new Ds(Vs(r,n,i)),s=0,u=i>0?n-4:n,a;for(a=0;a<u;a+=4)e=P[r.charCodeAt(a)]<<18|P[r.charCodeAt(a+1)]<<12|P[r.charCodeAt(a+2)]<<6|P[r.charCodeAt(a+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=P[r.charCodeAt(a)]<<2|P[r.charCodeAt(a+1)]>>4,o[s++]=e&255),i===1&&(e=P[r.charCodeAt(a)]<<10|P[r.charCodeAt(a+1)]<<4|P[r.charCodeAt(a+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function js(r){return Y[r>>18&63]+Y[r>>12&63]+Y[r>>6&63]+Y[r&63]}function $s(r,e,t){for(var n,i=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),i.push(js(n));return i.join("")}function Ks(r){for(var e,t=r.length,n=t%3,i=[],o=16383,s=0,u=t-n;s<u;s+=o)i.push($s(r,s,s+o>u?u:s+o));return n===1?(e=r[t-1],i.push(Y[e>>2]+Y[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],i.push(Y[e>>10]+Y[e>>4&63]+Y[e<<2&63]+"=")),i.join("")}});var ci=w(Tr=>{Tr.read=function(r,e,t,n,i){var o,s,u=i*8-n-1,a=(1<<u)-1,l=a>>1,c=-7,h=t?i-1:0,d=t?-1:1,g=r[e+h];for(h+=d,o=g&(1<<-c)-1,g>>=-c,c+=u;c>0;o=o*256+r[e+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=s*256+r[e+h],h+=d,c-=8);if(o===0)o=1-l;else{if(o===a)return s?NaN:(g?-1:1)*(1/0);s=s+Math.pow(2,n),o=o-l}return(g?-1:1)*s*Math.pow(2,o-n)};Tr.write=function(r,e,t,n,i,o){var s,u,a,l=o*8-i-1,c=(1<<l)-1,h=c>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:o-1,p=n?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),s+h>=1?e+=d/a:e+=d*Math.pow(2,1-h),e*a>=2&&(s++,a/=2),s+h>=c?(u=0,s=c):s+h>=1?(u=(e*a-1)*Math.pow(2,i),s=s+h):(u=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;r[t+g]=u&255,g+=p,u/=256,i-=8);for(s=s<<i|u,l+=i;l>0;r[t+g]=s&255,g+=p,s/=256,l-=8);r[t+g-p]|=y*128}});var Vt=w(We=>{"use strict";var Ir=ui(),Ye=ci(),fi=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;We.Buffer=f;We.SlowBuffer=Js;We.INSPECT_MAX_BYTES=50;var Dt=2147483647;We.kMaxLength=Dt;f.TYPED_ARRAY_SUPPORT=zs();!f.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function zs(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}});Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}});function Z(r){if(r>Dt)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,f.prototype),e}function f(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return Lr(r)}return di(r,e,t)}f.poolSize=8192;function di(r,e,t){if(typeof r=="string")return Ys(r,e);if(ArrayBuffer.isView(r))return Hs(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(H(r,ArrayBuffer)||r&&H(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(H(r,SharedArrayBuffer)||r&&H(r.buffer,SharedArrayBuffer)))return Br(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return f.from(n,e,t);let i=Ws(r);if(i)return i;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return f.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}f.from=function(r,e,t){return di(r,e,t)};Object.setPrototypeOf(f.prototype,Uint8Array.prototype);Object.setPrototypeOf(f,Uint8Array);function pi(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function Gs(r,e,t){return pi(r),r<=0?Z(r):e!==void 0?typeof t=="string"?Z(r).fill(e,t):Z(r).fill(e):Z(r)}f.alloc=function(r,e,t){return Gs(r,e,t)};function Lr(r){return pi(r),Z(r<0?0:Sr(r)|0)}f.allocUnsafe=function(r){return Lr(r)};f.allocUnsafeSlow=function(r){return Lr(r)};function Ys(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!f.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=yi(r,e)|0,n=Z(t),i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function Ar(r){let e=r.length<0?0:Sr(r.length)|0,t=Z(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function Hs(r){if(H(r,Uint8Array)){let e=new Uint8Array(r);return Br(e.buffer,e.byteOffset,e.byteLength)}return Ar(r)}function Br(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,f.prototype),n}function Ws(r){if(f.isBuffer(r)){let e=Sr(r.length)|0,t=Z(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||kr(r.length)?Z(0):Ar(r);if(r.type==="Buffer"&&Array.isArray(r.data))return Ar(r.data)}function Sr(r){if(r>=Dt)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Dt.toString(16)+" bytes");return r|0}function Js(r){return+r!=r&&(r=0),f.alloc(+r)}f.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==f.prototype};f.compare=function(e,t){if(H(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let o=0,s=Math.min(n,i);o<s;++o)if(e[o]!==t[o]){n=e[o],i=t[o];break}return n<i?-1:i<n?1:0};f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};f.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return f.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let i=f.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let s=e[n];if(H(s,Uint8Array))o+s.length>i.length?(f.isBuffer(s)||(s=f.from(s)),s.copy(i,o)):Uint8Array.prototype.set.call(i,s,o);else if(f.isBuffer(s))s.copy(i,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=s.length}return i};function yi(r,e){if(f.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||H(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return Fr(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return Ci(r).length;default:if(i)return n?-1:Fr(r).length;e=(""+e).toLowerCase(),i=!0}}f.byteLength=yi;function Xs(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return uu(this,e,t);case"utf8":case"utf-8":return gi(this,e,t);case"ascii":return ou(this,e,t);case"latin1":case"binary":return su(this,e,t);case"base64":return nu(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return cu(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}f.prototype._isBuffer=!0;function ve(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}f.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)ve(this,t,t+1);return this};f.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)ve(this,t,t+3),ve(this,t+1,t+2);return this};f.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)ve(this,t,t+7),ve(this,t+1,t+6),ve(this,t+2,t+5),ve(this,t+3,t+4);return this};f.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?gi(this,0,e):Xs.apply(this,arguments)};f.prototype.toLocaleString=f.prototype.toString;f.prototype.equals=function(e){if(!f.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:f.compare(this,e)===0};f.prototype.inspect=function(){let e="",t=We.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};fi&&(f.prototype[fi]=f.prototype.inspect);f.prototype.compare=function(e,t,n,i,o){if(H(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),t<0||n>e.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&t>=n)return 0;if(i>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,i>>>=0,o>>>=0,this===e)return 0;let s=o-i,u=n-t,a=Math.min(s,u),l=this.slice(i,o),c=e.slice(t,n);for(let h=0;h<a;++h)if(l[h]!==c[h]){s=l[h],u=c[h];break}return s<u?-1:u<s?1:0};function mi(r,e,t,n,i){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,kr(t)&&(t=i?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(i)return-1;t=r.length-1}else if(t<0)if(i)t=0;else return-1;if(typeof e=="string"&&(e=f.from(e,n)),f.isBuffer(e))return e.length===0?-1:hi(r,e,t,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):hi(r,[e],t,n,i);throw new TypeError("val must be string, number or Buffer")}function hi(r,e,t,n,i){let o=1,s=r.length,u=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,s/=2,u/=2,t/=2}function a(c,h){return o===1?c[h]:c.readUInt16BE(h*o)}let l;if(i){let c=-1;for(l=t;l<s;l++)if(a(r,l)===a(e,c===-1?0:l-c)){if(c===-1&&(c=l),l-c+1===u)return c*o}else c!==-1&&(l-=l-c),c=-1}else for(t+u>s&&(t=s-u),l=t;l>=0;l--){let c=!0;for(let h=0;h<u;h++)if(a(r,l+h)!==a(e,h)){c=!1;break}if(c)return l}return-1}f.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};f.prototype.indexOf=function(e,t,n){return mi(this,e,t,n,!0)};f.prototype.lastIndexOf=function(e,t,n){return mi(this,e,t,n,!1)};function Qs(r,e,t,n){t=Number(t)||0;let i=r.length-t;n?(n=Number(n),n>i&&(n=i)):n=i;let o=e.length;n>o/2&&(n=o/2);let s;for(s=0;s<n;++s){let u=parseInt(e.substr(s*2,2),16);if(kr(u))return s;r[t+s]=u}return s}function Zs(r,e,t,n){return Pt(Fr(e,r.length-t),r,t,n)}function eu(r,e,t,n){return Pt(lu(e),r,t,n)}function tu(r,e,t,n){return Pt(Ci(e),r,t,n)}function ru(r,e,t,n){return Pt(du(e,r.length-t),r,t,n)}f.prototype.write=function(e,t,n,i){if(t===void 0)i="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")i=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let s=!1;for(;;)switch(i){case"hex":return Qs(this,e,t,n);case"utf8":case"utf-8":return Zs(this,e,t,n);case"ascii":case"latin1":case"binary":return eu(this,e,t,n);case"base64":return tu(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ru(this,e,t,n);default:if(s)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),s=!0}};f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function nu(r,e,t){return e===0&&t===r.length?Ir.fromByteArray(r):Ir.fromByteArray(r.slice(e,t))}function gi(r,e,t){t=Math.min(r.length,t);let n=[],i=e;for(;i<t;){let o=r[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=t){let a,l,c,h;switch(u){case 1:o<128&&(s=o);break;case 2:a=r[i+1],(a&192)===128&&(h=(o&31)<<6|a&63,h>127&&(s=h));break;case 3:a=r[i+1],l=r[i+2],(a&192)===128&&(l&192)===128&&(h=(o&15)<<12|(a&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:a=r[i+1],l=r[i+2],c=r[i+3],(a&192)===128&&(l&192)===128&&(c&192)===128&&(h=(o&15)<<18|(a&63)<<12|(l&63)<<6|c&63,h>65535&&h<1114112&&(s=h))}}s===null?(s=65533,u=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|s&1023),n.push(s),i+=u}return iu(n)}var ai=4096;function iu(r){let e=r.length;if(e<=ai)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=ai));return t}function ou(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]&127);return n}function su(r,e,t){let n="";t=Math.min(r.length,t);for(let i=e;i<t;++i)n+=String.fromCharCode(r[i]);return n}function uu(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let i="";for(let o=e;o<t;++o)i+=pu[r[o]];return i}function cu(r,e,t){let n=r.slice(e,t),i="";for(let o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+n[o+1]*256);return i}f.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let i=this.subarray(e,t);return Object.setPrototypeOf(i,f.prototype),i};function _(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||_(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return i};f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||_(e,t,this.length);let i=this[e+--t],o=1;for(;t>0&&(o*=256);)i+=this[e+--t]*o;return i};f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e=e>>>0,t||_(e,1,this.length),this[e]};f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||_(e,2,this.length),this[e]|this[e+1]<<8};f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||_(e,2,this.length),this[e]<<8|this[e+1]};f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||_(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||_(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};f.prototype.readBigUInt64LE=fe(function(e){e=e>>>0,He(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lt(e,this.length-8);let i=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(o)<<BigInt(32))});f.prototype.readBigUInt64BE=fe(function(e){e=e>>>0,He(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lt(e,this.length-8);let i=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(o)});f.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||_(e,t,this.length);let i=this[e],o=1,s=0;for(;++s<t&&(o*=256);)i+=this[e+s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};f.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||_(e,t,this.length);let i=t,o=1,s=this[e+--i];for(;i>0&&(o*=256);)s+=this[e+--i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};f.prototype.readInt8=function(e,t){return e=e>>>0,t||_(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};f.prototype.readInt16LE=function(e,t){e=e>>>0,t||_(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};f.prototype.readInt16BE=function(e,t){e=e>>>0,t||_(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};f.prototype.readInt32LE=function(e,t){return e=e>>>0,t||_(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};f.prototype.readInt32BE=function(e,t){return e=e>>>0,t||_(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};f.prototype.readBigInt64LE=fe(function(e){e=e>>>0,He(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lt(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});f.prototype.readBigInt64BE=fe(function(e){e=e>>>0,He(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&lt(e,this.length-8);let i=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});f.prototype.readFloatLE=function(e,t){return e=e>>>0,t||_(e,4,this.length),Ye.read(this,e,!0,23,4)};f.prototype.readFloatBE=function(e,t){return e=e>>>0,t||_(e,4,this.length),Ye.read(this,e,!1,23,4)};f.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||_(e,8,this.length),Ye.read(this,e,!0,52,8)};f.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||_(e,8,this.length),Ye.read(this,e,!1,52,8)};function B(r,e,t,n,i,o){if(!f.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;B(this,e,t,n,u,0)}let o=1,s=0;for(this[t]=e&255;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n};f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,n=n>>>0,!i){let u=Math.pow(2,8*n)-1;B(this,e,t,n,u,0)}let o=n-1,s=1;for(this[t+o]=e&255;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n};f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,1,255,0),this[t]=e&255,t+1};f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function wi(r,e,t,n,i){_i(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,s=s>>8,r[t++]=s,t}function Ei(r,e,t,n,i){_i(e,n,i,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=s,s=s>>8,r[t+2]=s,s=s>>8,r[t+1]=s,s=s>>8,r[t]=s,t+8}f.prototype.writeBigUInt64LE=fe(function(e,t=0){return wi(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});f.prototype.writeBigUInt64BE=fe(function(e,t=0){return Ei(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});f.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*n-1);B(this,e,t,n,a-1,-a)}let o=0,s=1,u=0;for(this[t]=e&255;++o<n&&(s*=256);)e<0&&u===0&&this[t+o-1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};f.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t=t>>>0,!i){let a=Math.pow(2,8*n-1);B(this,e,t,n,a-1,-a)}let o=n-1,s=1,u=0;for(this[t+o]=e&255;--o>=0&&(s*=256);)e<0&&u===0&&this[t+o+1]!==0&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n};f.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};f.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};f.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};f.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};f.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};f.prototype.writeBigInt64LE=fe(function(e,t=0){return wi(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});f.prototype.writeBigInt64BE=fe(function(e,t=0){return Ei(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xi(r,e,t,n,i,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function bi(r,e,t,n,i){return e=+e,t=t>>>0,i||xi(r,e,t,4,34028234663852886e22,-34028234663852886e22),Ye.write(r,e,t,n,23,4),t+4}f.prototype.writeFloatLE=function(e,t,n){return bi(this,e,t,!0,n)};f.prototype.writeFloatBE=function(e,t,n){return bi(this,e,t,!1,n)};function vi(r,e,t,n,i){return e=+e,t=t>>>0,i||xi(r,e,t,8,17976931348623157e292,-17976931348623157e292),Ye.write(r,e,t,n,52,8),t+8}f.prototype.writeDoubleLE=function(e,t,n){return vi(this,e,t,!0,n)};f.prototype.writeDoubleBE=function(e,t,n){return vi(this,e,t,!1,n)};f.prototype.copy=function(e,t,n,i){if(!f.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);let o=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),o};f.prototype.fill=function(e,t,n,i){if(typeof e=="string"){if(typeof t=="string"?(i=t,t=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!f.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let s=e.charCodeAt(0);(i==="utf8"&&s<128||i==="latin1")&&(e=s)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let s=f.isBuffer(e)?e:f.from(e,i),u=s.length;if(u===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var Ge={};function Or(r,e,t){Ge[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}Or("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);Or("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);Or("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,i=t;return Number.isInteger(t)&&Math.abs(t)>2**32?i=li(String(t)):typeof t=="bigint"&&(i=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(i=li(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function li(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function fu(r,e,t){He(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&lt(e,r.length-(t+1))}function _i(r,e,t,n,i,o){if(r>t||r<e){let s=typeof e=="bigint"?"n":"",u;throw o>3?e===0||e===BigInt(0)?u=`>= 0${s} and < 2${s} ** ${(o+1)*8}${s}`:u=`>= -(2${s} ** ${(o+1)*8-1}${s}) and < 2 ** ${(o+1)*8-1}${s}`:u=`>= ${e}${s} and <= ${t}${s}`,new Ge.ERR_OUT_OF_RANGE("value",u,r)}fu(n,i,o)}function He(r,e){if(typeof r!="number")throw new Ge.ERR_INVALID_ARG_TYPE(e,"number",r)}function lt(r,e,t){throw Math.floor(r)!==r?(He(r,t),new Ge.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new Ge.ERR_BUFFER_OUT_OF_BOUNDS:new Ge.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var hu=/[^+/0-9A-Za-z-_]/g;function au(r){if(r=r.split("=")[0],r=r.trim().replace(hu,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function Fr(r,e){e=e||1/0;let t,n=r.length,i=null,o=[];for(let s=0;s<n;++s){if(t=r.charCodeAt(s),t>55295&&t<57344){if(!i){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),i=t;continue}t=(i-55296<<10|t-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function lu(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function du(r,e){let t,n,i,o=[];for(let s=0;s<r.length&&!((e-=2)<0);++s)t=r.charCodeAt(s),n=t>>8,i=t%256,o.push(i),o.push(n);return o}function Ci(r){return Ir.toByteArray(au(r))}function Pt(r,e,t,n){let i;for(i=0;i<n&&!(i+t>=e.length||i>=r.length);++i)e[i+t]=r[i];return i}function H(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function kr(r){return r!==r}var pu=function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let i=0;i<16;++i)e[n+i]=r[t]+r[i]}return e}();function fe(r){return typeof BigInt>"u"?yu:r}function yu(){throw new Error("BigInt not supported")}});var Ur=w((oh,Ti)=>{"use strict";var Nr=null;Ti.exports=function(){return Nr===null&&(Nr={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),Nr}});var Dr=w(Ii=>{"use strict";var Rr=K(),mu=new Set(["buffer","view","utf8"]),Mr=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!mu.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new Rr(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new Rr(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new Rr(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};Ii.Encoding=Mr});var jr=w(qt=>{"use strict";var{Buffer:Vr}=Vt()||{},{Encoding:qr}=Dr(),gu=Ur(),dt=class extends qr{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new pt({encode:this.encode,decode:e=>this.decode(Vr.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},pt=class extends qr{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new dt({encode:e=>{let t=this.encode(e);return Vr.from(t.buffer,t.byteOffset,t.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},Pr=class extends qr{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new dt({encode:e=>Vr.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){let{textEncoder:e,textDecoder:t}=gu();return new pt({encode:n=>e.encode(this.encode(n)),decode:n=>this.decode(t.decode(n)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};qt.BufferFormat=dt;qt.ViewFormat=pt;qt.UTF8Format=Pr});var Li=w(_e=>{"use strict";var{Buffer:T}=Vt()||{Buffer:{isBuffer:()=>!1}},{textEncoder:Bi,textDecoder:Ai}=Ur()(),{BufferFormat:yt,ViewFormat:$r,UTF8Format:Fi}=jr(),jt=r=>r;_e.utf8=new Fi({encode:function(r){return T.isBuffer(r)?r.toString("utf8"):ArrayBuffer.isView(r)?Ai.decode(r):String(r)},decode:jt,name:"utf8",createViewTranscoder(){return new $r({encode:function(r){return ArrayBuffer.isView(r)?r:Bi.encode(r)},decode:function(r){return Ai.decode(r)},name:`${this.name}+view`})},createBufferTranscoder(){return new yt({encode:function(r){return T.isBuffer(r)?r:ArrayBuffer.isView(r)?T.from(r.buffer,r.byteOffset,r.byteLength):T.from(String(r),"utf8")},decode:function(r){return r.toString("utf8")},name:`${this.name}+buffer`})}});_e.json=new Fi({encode:JSON.stringify,decode:JSON.parse,name:"json"});_e.buffer=new yt({encode:function(r){return T.isBuffer(r)?r:ArrayBuffer.isView(r)?T.from(r.buffer,r.byteOffset,r.byteLength):T.from(String(r),"utf8")},decode:jt,name:"buffer",createViewTranscoder(){return new $r({encode:function(r){return ArrayBuffer.isView(r)?r:T.from(String(r),"utf8")},decode:function(r){return T.from(r.buffer,r.byteOffset,r.byteLength)},name:`${this.name}+view`})}});_e.view=new $r({encode:function(r){return ArrayBuffer.isView(r)?r:Bi.encode(r)},decode:jt,name:"view",createBufferTranscoder(){return new yt({encode:function(r){return T.isBuffer(r)?r:ArrayBuffer.isView(r)?T.from(r.buffer,r.byteOffset,r.byteLength):T.from(String(r),"utf8")},decode:jt,name:`${this.name}+buffer`})}});_e.hex=new yt({encode:function(r){return T.isBuffer(r)?r:T.from(String(r),"hex")},decode:function(r){return r.toString("hex")},name:"hex"});_e.base64=new yt({encode:function(r){return T.isBuffer(r)?r:T.from(String(r),"base64")},decode:function(r){return r.toString("base64")},name:"base64"})});var ki=w(Oi=>{"use strict";var Si=K(),Kt=Li(),{Encoding:wu}=Dr(),{BufferFormat:Eu,ViewFormat:xu,UTF8Format:bu}=jr(),mt=Symbol("formats"),$t=Symbol("encodings"),vu=new Set(["buffer","view","utf8"]),Kr=class{constructor(e){if(Array.isArray(e)){if(!e.every(t=>vu.has(t)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[$t]=new Map,this[mt]=new Set(e);for(let t in Kt)try{this.encoding(t)}catch(n){if(n.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw n}}encodings(){return Array.from(new Set(this[$t].values()))}encoding(e){let t=this[$t].get(e);if(t===void 0){if(typeof e=="string"&&e!==""){if(t=Iu[e],!t)throw new Si(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");t=_u(e)}let{name:n,format:i}=t;if(!this[mt].has(i))if(this[mt].has("view"))t=t.createViewTranscoder();else if(this[mt].has("buffer"))t=t.createBufferTranscoder();else if(this[mt].has("utf8"))t=t.createUTF8Transcoder();else throw new Si(`Encoding '${n}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(let o of[e,n,t.name,t.commonName])this[$t].set(o,t)}return t}};Oi.Transcoder=Kr;function _u(r){if(r instanceof wu)return r;let e="type"in r&&typeof r.type=="string"?r.type:void 0,t=r.name||e||`anonymous-${Au++}`;switch(Cu(r)){case"view":return new xu({...r,name:t});case"utf8":return new bu({...r,name:t});case"buffer":return new Eu({...r,name:t});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function Cu(r){return"format"in r&&r.format!==void 0?r.format:"buffer"in r&&typeof r.buffer=="boolean"?r.buffer?"buffer":"utf8":"code"in r&&Number.isInteger(r.code)?"view":"buffer"}var Tu={binary:Kt.buffer,"utf-8":Kt.utf8},Iu={...Kt,...Tu},Au=0});var Ki=w((hh,zr)=>{"use strict";var Je=typeof Reflect=="object"?Reflect:null,Ni=Je&&typeof Je.apply=="function"?Je.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},zt;Je&&typeof Je.ownKeys=="function"?zt=Je.ownKeys:Object.getOwnPropertySymbols?zt=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zt=function(e){return Object.getOwnPropertyNames(e)};function Bu(r){console&&console.warn&&console.warn(r)}var Ri=Number.isNaN||function(e){return e!==e};function x(){x.init.call(this)}zr.exports=x;zr.exports.once=Ou;x.EventEmitter=x;x.prototype._events=void 0;x.prototype._eventsCount=0;x.prototype._maxListeners=void 0;var Ui=10;function Gt(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(x,"defaultMaxListeners",{enumerable:!0,get:function(){return Ui},set:function(r){if(typeof r!="number"||r<0||Ri(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ui=r}});x.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};x.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ri(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Mi(r){return r._maxListeners===void 0?x.defaultMaxListeners:r._maxListeners}x.prototype.getMaxListeners=function(){return Mi(this)};x.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var a=o[e];if(a===void 0)return!1;if(typeof a=="function")Ni(a,this,t);else for(var l=a.length,c=ji(a,l),n=0;n<l;++n)Ni(c[n],this,t);return!0};function Di(r,e,t,n){var i,o,s;if(Gt(t),o=r._events,o===void 0?(o=r._events=Object.create(null),r._eventsCount=0):(o.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),o=r._events),s=o[e]),s===void 0)s=o[e]=t,++r._eventsCount;else if(typeof s=="function"?s=o[e]=n?[t,s]:[s,t]:n?s.unshift(t):s.push(t),i=Mi(r),i>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=r,u.type=e,u.count=s.length,Bu(u)}return r}x.prototype.addListener=function(e,t){return Di(this,e,t,!1)};x.prototype.on=x.prototype.addListener;x.prototype.prependListener=function(e,t){return Di(this,e,t,!0)};function Fu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Pi(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},i=Fu.bind(n);return i.listener=t,n.wrapFn=i,i}x.prototype.once=function(e,t){return Gt(t),this.on(e,Pi(this,e,t)),this};x.prototype.prependOnceListener=function(e,t){return Gt(t),this.prependListener(e,Pi(this,e,t)),this};x.prototype.removeListener=function(e,t){var n,i,o,s,u;if(Gt(t),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(o=-1,s=n.length-1;s>=0;s--)if(n[s]===t||n[s].listener===t){u=n[s].listener,o=s;break}if(o<0)return this;o===0?n.shift():Lu(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,u||t)}return this};x.prototype.off=x.prototype.removeListener;x.prototype.removeAllListeners=function(e){var t,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this};function Vi(r,e,t){var n=r._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?t?[i.listener||i]:[i]:t?Su(i):ji(i,i.length)}x.prototype.listeners=function(e){return Vi(this,e,!0)};x.prototype.rawListeners=function(e){return Vi(this,e,!1)};x.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):qi.call(r,e)};x.prototype.listenerCount=qi;function qi(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}x.prototype.eventNames=function(){return this._eventsCount>0?zt(this._events):[]};function ji(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function Lu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Su(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Ou(r,e){return new Promise(function(t,n){function i(s){r.removeListener(e,o),n(s)}function o(){typeof r.removeListener=="function"&&r.removeListener("error",i),t([].slice.call(arguments))}$i(r,e,o,{once:!0}),e!=="error"&&ku(r,i,{once:!0})})}function ku(r,e,t){typeof r.on=="function"&&$i(r,"error",e,t)}function $i(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function i(o){n.once&&r.removeEventListener(e,i),t(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}});var Gi=w((ah,zi)=>{zi.exports=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(r)});var gt=w(Gr=>{"use strict";var Yi=Gi();Gr.fromCallback=function(r,e){if(r===void 0){var t=new Promise(function(n,i){r=function(o,s){o?i(o):n(s)}});r[e!==void 0?e:"promise"]=t}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r};Gr.fromPromise=function(r,e){if(e===void 0)return r;r.then(function(t){Yi(()=>e(null,t))}).catch(function(t){Yi(()=>e(t))})}});var Yt=w(Yr=>{"use strict";Yr.getCallback=function(r,e){return typeof r=="function"?r:e};Yr.getOptions=function(r,e){return typeof r=="object"&&r!==null?r:e!==void 0?e:{}}});var ye=w(Xt=>{"use strict";var{fromCallback:Hr}=gt(),k=K(),{getOptions:Wr,getCallback:Hi}=Yt(),Ce=Symbol("promise"),Xe=Symbol("callback"),W=Symbol("working"),Te=Symbol("handleOne"),ee=Symbol("handleMany"),Jr=Symbol("autoClose"),de=Symbol("finishWork"),J=Symbol("returnMany"),he=Symbol("closing"),wt=Symbol("handleClose"),Ht=Symbol("closed"),Et=Symbol("closeCallbacks"),le=Symbol("keyEncoding"),Ie=Symbol("valueEncoding"),Xr=Symbol("abortOnClose"),Wt=Symbol("legacy"),Qr=Symbol("keys"),Zr=Symbol("values"),ae=Symbol("limit"),V=Symbol("count"),Jt=Object.freeze({}),Nu=()=>{},Wi=!1,xt=class{constructor(e,t,n){if(typeof e!="object"||e===null){let i=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${i}`)}if(typeof t!="object"||t===null)throw new TypeError("The second argument must be an options object");this[Ht]=!1,this[Et]=[],this[W]=!1,this[he]=!1,this[Jr]=!1,this[Xe]=null,this[Te]=this[Te].bind(this),this[ee]=this[ee].bind(this),this[wt]=this[wt].bind(this),this[le]=t[le],this[Ie]=t[Ie],this[Wt]=n,this[ae]=Number.isInteger(t.limit)&&t.limit>=0?t.limit:1/0,this[V]=0,this[Xr]=!!t.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[V]}get limit(){return this[ae]}next(e){let t;if(e===void 0)t=new Promise((n,i)=>{e=(o,s,u)=>{o?i(o):this[Wt]?s===void 0&&u===void 0?n():n([s,u]):n(s)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[he]?this.nextTick(e,new k("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[W]?this.nextTick(e,new k("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[W]=!0,this[Xe]=e,this[V]>=this[ae]?this.nextTick(this[Te],null):this._next(this[Te])),t}_next(e){this.nextTick(e)}nextv(e,t,n){return n=Hi(t,n),n=Hr(n,Ce),t=Wr(t,Jt),Number.isInteger(e)?(this[he]?this.nextTick(n,new k("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[W]?this.nextTick(n,new k("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[ae]<1/0&&(e=Math.min(e,this[ae]-this[V])),this[W]=!0,this[Xe]=n,e<=0?this.nextTick(this[ee],null,[]):this._nextv(e,t,this[ee])),n[Ce]):(this.nextTick(n,new TypeError("The first argument 'size' must be an integer")),n[Ce])}_nextv(e,t,n){let i=[],o=(s,u,a)=>{if(s)return n(s);if(this[Wt]?u===void 0&&a===void 0:u===void 0)return n(null,i);i.push(this[Wt]?[u,a]:u),i.length===e?n(null,i):this._next(o)};this._next(o)}all(e,t){return t=Hi(e,t),t=Hr(t,Ce),e=Wr(e,Jt),this[he]?this.nextTick(t,new k("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[W]?this.nextTick(t,new k("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[W]=!0,this[Xe]=t,this[Jr]=!0,this[V]>=this[ae]?this.nextTick(this[ee],null,[]):this._all(e,this[ee])),t[Ce]}_all(e,t){let n=this[V],i=[],o=()=>{let u=this[ae]<1/0?Math.min(1e3,this[ae]-n):1e3;u<=0?this.nextTick(t,null,i):this._nextv(u,Jt,s)},s=(u,a)=>{u?t(u):a.length===0?t(null,i):(i.push.apply(i,a),n+=a.length,o())};o()}[de](){let e=this[Xe];return this[Xr]&&e===null?Nu:(this[W]=!1,this[Xe]=null,this[he]&&this._close(this[wt]),e)}[J](e,t,n){this[Jr]?this.close(e.bind(null,t,n)):e(t,n)}seek(e,t){if(t=Wr(t,Jt),!this[he]){if(this[W])throw new k("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{let n=this.db.keyEncoding(t.keyEncoding||this[le]),i=n.format;t.keyEncoding!==i&&(t={...t,keyEncoding:i});let o=this.db.prefixKey(n.encode(e),i);this._seek(o,t)}}}_seek(e,t){throw new k("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=Hr(e,Ce),this[Ht]?this.nextTick(e):this[he]?this[Et].push(e):(this[he]=!0,this[Et].push(e),this[W]?this[Xr]&&this[de]()(new k("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[wt])),e[Ce]}_close(e){this.nextTick(e)}[wt](){this[Ht]=!0,this.db.detachResource(this);let e=this[Et];this[Et]=[];for(let t of e)t()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[Ht]||await this.close()}}},Qe=class extends xt{constructor(e,t){super(e,t,!0),this[Qr]=t.keys!==!1,this[Zr]=t.values!==!1}[Te](e,t,n){let i=this[de]();if(e)return i(e);try{t=this[Qr]&&t!==void 0?this[le].decode(t):void 0,n=this[Zr]&&n!==void 0?this[Ie].decode(n):void 0}catch(o){return i(new pe("entry",o))}t===void 0&&n===void 0||this[V]++,i(null,t,n)}[ee](e,t){let n=this[de]();if(e)return this[J](n,e);try{for(let i of t){let o=i[0],s=i[1];i[0]=this[Qr]&&o!==void 0?this[le].decode(o):void 0,i[1]=this[Zr]&&s!==void 0?this[Ie].decode(s):void 0}}catch(i){return this[J](n,new pe("entries",i))}this[V]+=t.length,this[J](n,null,t)}end(e){return!Wi&&typeof console<"u"&&(Wi=!0,console.warn(new k("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},en=class extends xt{constructor(e,t){super(e,t,!1)}[Te](e,t){let n=this[de]();if(e)return n(e);try{t=t!==void 0?this[le].decode(t):void 0}catch(i){return n(new pe("key",i))}t!==void 0&&this[V]++,n(null,t)}[ee](e,t){let n=this[de]();if(e)return this[J](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[le].decode(o):void 0}}catch(i){return this[J](n,new pe("keys",i))}this[V]+=t.length,this[J](n,null,t)}},tn=class extends xt{constructor(e,t){super(e,t,!1)}[Te](e,t){let n=this[de]();if(e)return n(e);try{t=t!==void 0?this[Ie].decode(t):void 0}catch(i){return n(new pe("value",i))}t!==void 0&&this[V]++,n(null,t)}[ee](e,t){let n=this[de]();if(e)return this[J](n,e);try{for(let i=0;i<t.length;i++){let o=t[i];t[i]=o!==void 0?this[Ie].decode(o):void 0}}catch(i){return this[J](n,new pe("values",i))}this[V]+=t.length,this[J](n,null,t)}},pe=class extends k{constructor(e,t){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:t})}};for(let r of["_ended property","_nexting property","_end method"])Object.defineProperty(Qe.prototype,r.split(" ")[0],{get(){throw new k(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new k(`The ${r} has been removed`,{code:"LEVEL_LEGACY"})}});Qe.keyEncoding=le;Qe.valueEncoding=Ie;Xt.AbstractIterator=Qe;Xt.AbstractKeyIterator=en;Xt.AbstractValueIterator=tn});var Ji=w(rn=>{"use strict";var{AbstractKeyIterator:Uu,AbstractValueIterator:Ru}=ye(),Ae=Symbol("iterator"),bt=Symbol("callback"),Ze=Symbol("handleOne"),Be=Symbol("handleMany"),vt=class extends Uu{constructor(e,t){super(e,t),this[Ae]=e.iterator({...t,keys:!0,values:!1}),this[Ze]=this[Ze].bind(this),this[Be]=this[Be].bind(this)}},Qt=class extends Ru{constructor(e,t){super(e,t),this[Ae]=e.iterator({...t,keys:!1,values:!0}),this[Ze]=this[Ze].bind(this),this[Be]=this[Be].bind(this)}};for(let r of[vt,Qt]){let e=r===vt,t=e?n=>n[0]:n=>n[1];r.prototype._next=function(n){this[bt]=n,this[Ae].next(this[Ze])},r.prototype[Ze]=function(n,i,o){let s=this[bt];n?s(n):s(null,e?i:o)},r.prototype._nextv=function(n,i,o){this[bt]=o,this[Ae].nextv(n,i,this[Be])},r.prototype._all=function(n,i){this[bt]=i,this[Ae].all(n,this[Be])},r.prototype[Be]=function(n,i){let o=this[bt];n?o(n):o(null,i.map(t))},r.prototype._seek=function(n,i){this[Ae].seek(n,i)},r.prototype._close=function(n){this[Ae].close(n)}}rn.DefaultKeyIterator=vt;rn.DefaultValueIterator=Qt});var Xi=w(ir=>{"use strict";var{AbstractIterator:Mu,AbstractKeyIterator:Du,AbstractValueIterator:Pu}=ye(),nn=K(),F=Symbol("nut"),rr=Symbol("undefer"),nr=Symbol("factory"),Zt=class extends Mu{constructor(e,t){super(e,t),this[F]=null,this[nr]=()=>e.iterator(t),this.db.defer(()=>this[rr]())}},er=class extends Du{constructor(e,t){super(e,t),this[F]=null,this[nr]=()=>e.keys(t),this.db.defer(()=>this[rr]())}},tr=class extends Pu{constructor(e,t){super(e,t),this[F]=null,this[nr]=()=>e.values(t),this.db.defer(()=>this[rr]())}};for(let r of[Zt,er,tr])r.prototype[rr]=function(){this.db.status==="open"&&(this[F]=this[nr]())},r.prototype._next=function(e){this[F]!==null?this[F].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new nn("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._nextv=function(e,t,n){this[F]!==null?this[F].nextv(e,t,n):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,t,n)):this.nextTick(n,new nn("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._all=function(e,t){this[F]!==null?this[F].all(t):this.db.status==="opening"?this.db.defer(()=>this._all(e,t)):this.nextTick(t,new nn("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},r.prototype._seek=function(e,t){this[F]!==null?this[F]._seek(e,t):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,t))},r.prototype._close=function(e){this[F]!==null?this[F].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};ir.DeferredIterator=Zt;ir.DeferredKeyIterator=er;ir.DeferredValueIterator=tr});var sn=w(Zi=>{"use strict";var{fromCallback:Qi}=gt(),or=K(),{getCallback:Vu,getOptions:qu}=Yt(),sr=Symbol("promise"),q=Symbol("status"),et=Symbol("operations"),_t=Symbol("finishClose"),tt=Symbol("closeCallbacks"),on=class{constructor(e){if(typeof e!="object"||e===null){let t=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${t}`)}this[et]=[],this[tt]=[],this[q]="open",this[_t]=this[_t].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[et].length}put(e,t,n){if(this[q]!=="open")throw new or("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let i=this.db._checkKey(e)||this.db._checkValue(t);if(i)throw i;let o=n&&n.sublevel!=null?n.sublevel:this.db,s=n,u=o.keyEncoding(n&&n.keyEncoding),a=o.valueEncoding(n&&n.valueEncoding),l=u.format;n={...n,keyEncoding:l,valueEncoding:a.format},o!==this.db&&(n.sublevel=null);let c=o.prefixKey(u.encode(e),l),h=a.encode(t);return this._put(c,h,n),this[et].push({...s,type:"put",key:e,value:t}),this}_put(e,t,n){}del(e,t){if(this[q]!=="open")throw new or("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});let n=this.db._checkKey(e);if(n)throw n;let i=t&&t.sublevel!=null?t.sublevel:this.db,o=t,s=i.keyEncoding(t&&t.keyEncoding),u=s.format;return t={...t,keyEncoding:u},i!==this.db&&(t.sublevel=null),this._del(i.prefixKey(s.encode(e),u),t),this[et].push({...o,type:"del",key:e}),this}_del(e,t){}clear(){if(this[q]!=="open")throw new or("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[et]=[],this}_clear(){}write(e,t){return t=Vu(e,t),t=Qi(t,sr),e=qu(e),this[q]!=="open"?this.nextTick(t,new or("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(t):(this[q]="writing",this._write(e,n=>{this[q]="closing",this[tt].push(()=>t(n)),n||this.db.emit("batch",this[et]),this._close(this[_t])})),t[sr]}_write(e,t){}close(e){return e=Qi(e,sr),this[q]==="closing"?this[tt].push(e):this[q]==="closed"?this.nextTick(e):(this[tt].push(e),this[q]!=="writing"&&(this[q]="closing",this._close(this[_t]))),e[sr]}_close(e){this.nextTick(e)}[_t](){this[q]="closed",this.db.detachResource(this);let e=this[tt];this[tt]=[];for(let t of e)t()}};Zi.AbstractChainedBatch=on});var to=w(eo=>{"use strict";var{AbstractChainedBatch:ju}=sn(),$u=K(),rt=Symbol("encoded"),un=class extends ju{constructor(e){super(e),this[rt]=[]}_put(e,t,n){this[rt].push({...n,type:"put",key:e,value:t})}_del(e,t){this[rt].push({...t,type:"del",key:e})}_clear(){this[rt]=[]}_write(e,t){this.db.status==="opening"?this.db.defer(()=>this._write(e,t)):this.db.status==="open"?this[rt].length===0?this.nextTick(t):this.db._batch(this[rt],e,t):this.nextTick(t,new $u("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};eo.DefaultChainedBatch=un});var io=w((Eh,no)=>{"use strict";var ro=K(),Ku=Object.prototype.hasOwnProperty,zu=new Set(["lt","lte","gt","gte"]);no.exports=function(r,e){let t={};for(let n in r)if(Ku.call(r,n)&&!(n==="keyEncoding"||n==="valueEncoding")){if(n==="start"||n==="end")throw new ro(`The legacy range option '${n}' has been removed`,{code:"LEVEL_LEGACY"});if(n==="encoding")throw new ro("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});zu.has(n)?t[n]=e.encode(r[n]):t[n]=r[n]}return t.reverse=!!t.reverse,t.limit=Number.isInteger(t.limit)&&t.limit>=0?t.limit:-1,t}});var cn=w((xh,so)=>{var oo;so.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):r=>(oo||(oo=Promise.resolve())).then(r).catch(e=>setTimeout(()=>{throw e},0))});var fo=w((bh,co)=>{"use strict";var uo=cn();co.exports=function(r,...e){e.length===0?uo(r):uo(()=>r(...e))}});var ho=w(ur=>{"use strict";var{AbstractIterator:Gu,AbstractKeyIterator:Yu,AbstractValueIterator:Hu}=ye(),nt=Symbol("unfix"),z=Symbol("iterator"),Fe=Symbol("handleOne"),me=Symbol("handleMany"),te=Symbol("callback"),Ct=class extends Gu{constructor(e,t,n,i){super(e,t),this[z]=n,this[nt]=i,this[Fe]=this[Fe].bind(this),this[me]=this[me].bind(this),this[te]=null}[Fe](e,t,n){let i=this[te];if(e)return i(e);t!==void 0&&(t=this[nt](t)),i(e,t,n)}[me](e,t){let n=this[te];if(e)return n(e);for(let i of t){let o=i[0];o!==void 0&&(i[0]=this[nt](o))}n(e,t)}},Tt=class extends Yu{constructor(e,t,n,i){super(e,t),this[z]=n,this[nt]=i,this[Fe]=this[Fe].bind(this),this[me]=this[me].bind(this),this[te]=null}[Fe](e,t){let n=this[te];if(e)return n(e);t!==void 0&&(t=this[nt](t)),n(e,t)}[me](e,t){let n=this[te];if(e)return n(e);for(let i=0;i<t.length;i++){let o=t[i];o!==void 0&&(t[i]=this[nt](o))}n(e,t)}},It=class extends Hu{constructor(e,t,n){super(e,t),this[z]=n}};for(let r of[Ct,Tt])r.prototype._next=function(e){this[te]=e,this[z].next(this[Fe])},r.prototype._nextv=function(e,t,n){this[te]=n,this[z].nextv(e,t,this[me])},r.prototype._all=function(e,t){this[te]=t,this[z].all(e,this[me])};for(let r of[It])r.prototype._next=function(e){this[z].next(e)},r.prototype._nextv=function(e,t,n){this[z].nextv(e,t,n)},r.prototype._all=function(e,t){this[z].all(e,t)};for(let r of[Ct,Tt,It])r.prototype._seek=function(e,t){this[z].seek(e,t)},r.prototype._close=function(e){this[z].close(e)};ur.AbstractSublevelIterator=Ct;ur.AbstractSublevelKeyIterator=Tt;ur.AbstractSublevelValueIterator=It});var yo=w((_h,po)=>{"use strict";var fn=K(),{Buffer:ln}=Vt()||{},{AbstractSublevelIterator:Wu,AbstractSublevelKeyIterator:Ju,AbstractSublevelValueIterator:Xu}=ho(),re=Symbol("prefix"),ao=Symbol("upperBound"),At=Symbol("prefixRange"),N=Symbol("parent"),hn=Symbol("unfix"),lo=new TextEncoder,Qu={separator:"!"};po.exports=function({AbstractLevel:r}){class e extends r{static defaults(n){if(typeof n=="string")throw new fn("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(n&&n.open)throw new fn("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return n==null?Qu:n.separator?n:{...n,separator:"!"}}constructor(n,i,o){let{separator:s,manifest:u,...a}=e.defaults(o);i=ec(i,s);let l=s.charCodeAt(0)+1,c=n[N]||n;if(!lo.encode(i).every(g=>g>l&&g<127))throw new fn(`Prefix must use bytes > ${l} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(Zu(c,u),a);let h=(n.prefix||"")+s+i+s,d=h.slice(0,-1)+String.fromCharCode(l);this[N]=c,this[re]=new cr(h),this[ao]=new cr(d),this[hn]=new dn,this.nextTick=c.nextTick}prefixKey(n,i){if(i==="utf8")return this[re].utf8+n;if(n.byteLength===0)return this[re][i];if(i==="view"){let o=this[re].view,s=new Uint8Array(o.byteLength+n.byteLength);return s.set(o,0),s.set(n,o.byteLength),s}else{let o=this[re].buffer;return ln.concat([o,n],o.byteLength+n.byteLength)}}[At](n,i){n.gte!==void 0?n.gte=this.prefixKey(n.gte,i):n.gt!==void 0?n.gt=this.prefixKey(n.gt,i):n.gte=this[re][i],n.lte!==void 0?n.lte=this.prefixKey(n.lte,i):n.lt!==void 0?n.lt=this.prefixKey(n.lt,i):n.lte=this[ao][i]}get prefix(){return this[re].utf8}get db(){return this[N]}_open(n,i){this[N].open({passive:!0},i)}_put(n,i,o,s){this[N].put(n,i,o,s)}_get(n,i,o){this[N].get(n,i,o)}_getMany(n,i,o){this[N].getMany(n,i,o)}_del(n,i,o){this[N].del(n,i,o)}_batch(n,i,o){this[N].batch(n,i,o)}_clear(n,i){this[At](n,n.keyEncoding),this[N].clear(n,i)}_iterator(n){this[At](n,n.keyEncoding);let i=this[N].iterator(n),o=this[hn].get(this[re].utf8.length,n.keyEncoding);return new Wu(this,n,i,o)}_keys(n){this[At](n,n.keyEncoding);let i=this[N].keys(n),o=this[hn].get(this[re].utf8.length,n.keyEncoding);return new Ju(this,n,i,o)}_values(n){this[At](n,n.keyEncoding);let i=this[N].values(n);return new Xu(this,n,i)}}return{AbstractSublevel:e}};var Zu=function(r,e){return{...r.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...e,encodings:{utf8:an(r,"utf8"),buffer:an(r,"buffer"),view:an(r,"view")}}},an=function(r,e){return r.supports.encodings[e]?r.keyEncoding(e).name===e:!1},cr=class{constructor(e){this.utf8=e,this.view=lo.encode(e),this.buffer=ln?ln.from(this.view.buffer,0,this.view.byteLength):{}}},dn=class{constructor(){this.cache=new Map}get(e,t){let n=this.cache.get(t);return n===void 0&&(t==="view"?n=function(i,o){return o.subarray(i)}.bind(null,e):n=function(i,o){return o.slice(i)}.bind(null,e),this.cache.set(t,n)),n}},ec=function(r,e){let t=0,n=r.length;for(;t<n&&r[t]===e;)t++;for(;n>t&&r[n-1]===e;)n--;return r.slice(t,n)}});var wn=w(gn=>{"use strict";var{supports:tc}=ni(),{Transcoder:rc}=ki(),{EventEmitter:nc}=Ki(),{fromCallback:ge}=gt(),G=K(),{AbstractIterator:Le}=ye(),{DefaultKeyIterator:ic,DefaultValueIterator:oc}=Ji(),{DeferredIterator:sc,DeferredKeyIterator:uc,DeferredValueIterator:cc}=Xi(),{DefaultChainedBatch:mo}=to(),{getCallback:Se,getOptions:we}=Yt(),fr=io(),m=Symbol("promise"),ne=Symbol("landed"),Oe=Symbol("resources"),pn=Symbol("closeResources"),Bt=Symbol("operations"),Ft=Symbol("undefer"),hr=Symbol("deferOpen"),go=Symbol("options"),E=Symbol("status"),ke=Symbol("defaultOptions"),it=Symbol("transcoder"),ar=Symbol("keyEncoding"),yn=Symbol("valueEncoding"),fc=()=>{},Lt=class extends nc{constructor(e,t){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");t=we(t);let{keyEncoding:n,valueEncoding:i,passive:o,...s}=t;this[Oe]=new Set,this[Bt]=[],this[hr]=!0,this[go]=s,this[E]="opening",this.supports=tc(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[it]=new rc(hc(this)),this[ar]=this[it].encoding(n||"utf8"),this[yn]=this[it].encoding(i||"utf8");for(let u of this[it].encodings())this.supports.encodings[u.commonName]||(this.supports.encodings[u.commonName]=!0);this[ke]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[ar].commonName,valueEncoding:this[yn].commonName}),key:Object.freeze({keyEncoding:this[ar].commonName})},this.nextTick(()=>{this[hr]&&this.open({passive:!1},fc)})}get status(){return this[E]}keyEncoding(e){return this[it].encoding(e??this[ar])}valueEncoding(e){return this[it].encoding(e??this[yn])}open(e,t){t=Se(e,t),t=ge(t,m),e={...this[go],...we(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;let n=i=>{this[E]==="closing"||this[E]==="opening"?this.once(ne,i?()=>n(i):n):this[E]!=="open"?t(new G("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:i})):t()};return e.passive?this[E]==="opening"?this.once(ne,n):this.nextTick(n):this[E]==="closed"||this[hr]?(this[hr]=!1,this[E]="opening",this.emit("opening"),this._open(e,i=>{if(i){this[E]="closed",this[pn](()=>{this.emit(ne),n(i)}),this[Ft]();return}this[E]="open",this[Ft](),this.emit(ne),this[E]==="open"&&this.emit("open"),this[E]==="open"&&this.emit("ready"),n()})):this[E]==="open"?this.nextTick(n):this.once(ne,()=>this.open(e,t)),t[m]}_open(e,t){this.nextTick(t)}close(e){e=ge(e,m);let t=n=>{this[E]==="opening"||this[E]==="closing"?this.once(ne,n?t(n):t):this[E]!=="closed"?e(new G("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:n})):e()};if(this[E]==="open"){this[E]="closing",this.emit("closing");let n=i=>{this[E]="open",this[Ft](),this.emit(ne),t(i)};this[pn](()=>{this._close(i=>{if(i)return n(i);this[E]="closed",this[Ft](),this.emit(ne),this[E]==="closed"&&this.emit("closed"),t()})})}else this[E]==="closed"?this.nextTick(t):this.once(ne,()=>this.close(e));return e[m]}[pn](e){if(this[Oe].size===0)return this.nextTick(e);let t=this[Oe].size,n=!0,i=()=>{--t===0&&(n?this.nextTick(e):e())};for(let o of this[Oe])o.close(i);n=!1,this[Oe].clear()}_close(e){this.nextTick(e)}get(e,t,n){if(n=Se(t,n),n=ge(n,m),t=we(t,this[ke].entry),this[E]==="opening")return this.defer(()=>this.get(e,t,n)),n[m];if(ot(this,n))return n[m];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[m];let o=this.keyEncoding(t.keyEncoding),s=this.valueEncoding(t.valueEncoding),u=o.format,a=s.format;return(t.keyEncoding!==u||t.valueEncoding!==a)&&(t=Object.assign({},t,{keyEncoding:u,valueEncoding:a})),this._get(this.prefixKey(o.encode(e),u),t,(l,c)=>{if(l)return(l.code==="LEVEL_NOT_FOUND"||l.notFound||/NotFound/i.test(l))&&(l.code||(l.code="LEVEL_NOT_FOUND"),l.notFound||(l.notFound=!0),l.status||(l.status=404)),n(l);try{c=s.decode(c)}catch(h){return n(new G("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,c)}),n[m]}_get(e,t,n){this.nextTick(n,new Error("NotFound"))}getMany(e,t,n){if(n=Se(t,n),n=ge(n,m),t=we(t,this[ke].entry),this[E]==="opening")return this.defer(()=>this.getMany(e,t,n)),n[m];if(ot(this,n))return n[m];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'keys' must be an array")),n[m];if(e.length===0)return this.nextTick(n,null,[]),n[m];let i=this.keyEncoding(t.keyEncoding),o=this.valueEncoding(t.valueEncoding),s=i.format,u=o.format;(t.keyEncoding!==s||t.valueEncoding!==u)&&(t=Object.assign({},t,{keyEncoding:s,valueEncoding:u}));let a=new Array(e.length);for(let l=0;l<e.length;l++){let c=e[l],h=this._checkKey(c);if(h)return this.nextTick(n,h),n[m];a[l]=this.prefixKey(i.encode(c),s)}return this._getMany(a,t,(l,c)=>{if(l)return n(l);try{for(let h=0;h<c.length;h++)c[h]!==void 0&&(c[h]=o.decode(c[h]))}catch(h){return n(new G(`Could not decode one or more of ${c.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:h}))}n(null,c)}),n[m]}_getMany(e,t,n){this.nextTick(n,null,new Array(e.length).fill(void 0))}put(e,t,n,i){if(i=Se(n,i),i=ge(i,m),n=we(n,this[ke].entry),this[E]==="opening")return this.defer(()=>this.put(e,t,n,i)),i[m];if(ot(this,i))return i[m];let o=this._checkKey(e)||this._checkValue(t);if(o)return this.nextTick(i,o),i[m];let s=this.keyEncoding(n.keyEncoding),u=this.valueEncoding(n.valueEncoding),a=s.format,l=u.format;(n.keyEncoding!==a||n.valueEncoding!==l)&&(n=Object.assign({},n,{keyEncoding:a,valueEncoding:l}));let c=this.prefixKey(s.encode(e),a),h=u.encode(t);return this._put(c,h,n,d=>{if(d)return i(d);this.emit("put",e,t),i()}),i[m]}_put(e,t,n,i){this.nextTick(i)}del(e,t,n){if(n=Se(t,n),n=ge(n,m),t=we(t,this[ke].key),this[E]==="opening")return this.defer(()=>this.del(e,t,n)),n[m];if(ot(this,n))return n[m];let i=this._checkKey(e);if(i)return this.nextTick(n,i),n[m];let o=this.keyEncoding(t.keyEncoding),s=o.format;return t.keyEncoding!==s&&(t=Object.assign({},t,{keyEncoding:s})),this._del(this.prefixKey(o.encode(e),s),t,u=>{if(u)return n(u);this.emit("del",e),n()}),n[m]}_del(e,t,n){this.nextTick(n)}batch(e,t,n){if(!arguments.length){if(this[E]==="opening")return new mo(this);if(this[E]!=="open")throw new G("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?n=e:n=Se(t,n),n=ge(n,m),t=we(t,this[ke].empty),this[E]==="opening")return this.defer(()=>this.batch(e,t,n)),n[m];if(ot(this,n))return n[m];if(!Array.isArray(e))return this.nextTick(n,new TypeError("The first argument 'operations' must be an array")),n[m];if(e.length===0)return this.nextTick(n),n[m];let i=new Array(e.length),{keyEncoding:o,valueEncoding:s,...u}=t;for(let a=0;a<e.length;a++){if(typeof e[a]!="object"||e[a]===null)return this.nextTick(n,new TypeError("A batch operation must be an object")),n[m];let l=Object.assign({},e[a]);if(l.type!=="put"&&l.type!=="del")return this.nextTick(n,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),n[m];let c=this._checkKey(l.key);if(c)return this.nextTick(n,c),n[m];let h=l.sublevel!=null?l.sublevel:this,d=h.keyEncoding(l.keyEncoding||o),g=d.format;if(l.key=h.prefixKey(d.encode(l.key),g),l.keyEncoding=g,l.type==="put"){let p=this._checkValue(l.value);if(p)return this.nextTick(n,p),n[m];let y=h.valueEncoding(l.valueEncoding||s);l.value=y.encode(l.value),l.valueEncoding=y.format}h!==this&&(l.sublevel=null),i[a]=l}return this._batch(i,u,a=>{if(a)return n(a);this.emit("batch",e),n()}),n[m]}_batch(e,t,n){this.nextTick(n)}sublevel(e,t){return this._sublevel(e,mn.defaults(t))}_sublevel(e,t){return new mn(this,e,t)}prefixKey(e,t){return e}clear(e,t){if(t=Se(e,t),t=ge(t,m),e=we(e,this[ke].empty),this[E]==="opening")return this.defer(()=>this.clear(e,t)),t[m];if(ot(this,t))return t[m];let n=e,i=this.keyEncoding(e.keyEncoding);return e=fr(e,i),e.keyEncoding=i.format,e.limit===0?this.nextTick(t):this._clear(e,o=>{if(o)return t(o);this.emit("clear",n),t()}),t[m]}_clear(e,t){this.nextTick(t)}iterator(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=fr(e,t),e.keys=e.keys!==!1,e.values=e.values!==!1,e[Le.keyEncoding]=t,e[Le.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[E]==="opening")return new sc(this,e);if(this[E]!=="open")throw new G("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new Le(this,e)}keys(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=fr(e,t),e[Le.keyEncoding]=t,e[Le.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[E]==="opening")return new uc(this,e);if(this[E]!=="open")throw new G("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new ic(this,e)}values(e){let t=this.keyEncoding(e&&e.keyEncoding),n=this.valueEncoding(e&&e.valueEncoding);if(e=fr(e,t),e[Le.keyEncoding]=t,e[Le.valueEncoding]=n,e.keyEncoding=t.format,e.valueEncoding=n.format,this[E]==="opening")return new cc(this,e);if(this[E]!=="open")throw new G("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new oc(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[Bt].push(e)}[Ft](){if(this[Bt].length===0)return;let e=this[Bt];this[Bt]=[];for(let t of e)t()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[Oe].add(e)}detachResource(e){this[Oe].delete(e)}_chainedBatch(){return new mo(this)}_checkKey(e){if(e==null)return new G("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new G("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};Lt.prototype.nextTick=fo();var{AbstractSublevel:mn}=yo()({AbstractLevel:Lt});gn.AbstractLevel=Lt;gn.AbstractSublevel=mn;var ot=function(r,e){return r[E]!=="open"?(r.nextTick(e,new G("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},hc=function(r){return Object.keys(r.supports.encodings).filter(e=>!!r.supports.encodings[e])}});var En=w(Ne=>{"use strict";Ne.AbstractLevel=wn().AbstractLevel;Ne.AbstractSublevel=wn().AbstractSublevel;Ne.AbstractIterator=ye().AbstractIterator;Ne.AbstractKeyIterator=ye().AbstractKeyIterator;Ne.AbstractValueIterator=ye().AbstractValueIterator;Ne.AbstractChainedBatch=sn().AbstractChainedBatch});var Eo=w((Ih,wo)=>{wo.exports=lc;var ac=cn();function lc(r,e,t){if(typeof e!="number")throw new Error("second argument must be a Number");let n,i,o,s,u,a=!0,l;Array.isArray(r)?(n=[],o=i=r.length):(s=Object.keys(r),n={},o=i=s.length);function c(d){function g(){t&&t(d,n),t=null}a?ac(g):g()}function h(d,g,p){if(n[d]=p,g&&(u=!0),--o===0||g)c(g);else if(!u&&l<i){let y;s?(y=s[l],l+=1,r[y](function(b,v){h(y,b,v)})):(y=l,l+=1,r[y](function(b,v){h(y,b,v)}))}}l=e,o?s?s.some(function(d,g){return r[d](function(p,y){h(d,p,y)}),g===e-1}):r.some(function(d,g){return d(function(p,y){h(g,p,y)}),g===e-1}):c(null),a=!1}});var xn=w((Ah,xo)=>{"use strict";xo.exports=function(e){let t=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,n=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,i=e.gte===void 0,o=e.lte===void 0;return t!==void 0&&n!==void 0?IDBKeyRange.bound(t,n,i,o):t!==void 0?IDBKeyRange.lowerBound(t,i):n!==void 0?IDBKeyRange.upperBound(n,o):null}});var bn=w((Bh,bo)=>{"use strict";var dc=new TextEncoder;bo.exports=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):dc.encode(r)}});var Io=w(To=>{"use strict";var{AbstractIterator:pc}=En(),vo=xn(),lr=bn(),X=Symbol("cache"),ie=Symbol("finished"),U=Symbol("options"),oe=Symbol("currentOptions"),Ue=Symbol("position"),vn=Symbol("location"),st=Symbol("first"),_o={},_n=class extends pc{constructor(e,t,n){super(e,n),this[X]=[],this[ie]=this.limit===0,this[U]=n,this[oe]={...n},this[Ue]=void 0,this[vn]=t,this[st]=!0}_nextv(e,t,n){if(this[st]=!1,this[ie])return this.nextTick(n,null,[]);if(this[X].length>0)return e=Math.min(e,this[X].length),this.nextTick(n,null,this[X].splice(0,e));this[Ue]!==void 0&&(this[U].reverse?(this[oe].lt=this[Ue],this[oe].lte=void 0):(this[oe].gt=this[Ue],this[oe].gte=void 0));let i;try{i=vo(this[oe])}catch{return this[ie]=!0,this.nextTick(n,null,[])}let o=this.db.db.transaction([this[vn]],"readonly"),s=o.objectStore(this[vn]),u=[];if(this[U].reverse){let a=!this[U].values&&s.openKeyCursor?"openKeyCursor":"openCursor";s[a](i,"prev").onsuccess=l=>{let c=l.target.result;if(c){let{key:h,value:d}=c;this[Ue]=h,u.push([this[U].keys&&h!==void 0?lr(h):void 0,this[U].values&&d!==void 0?lr(d):void 0]),u.length<e?c.continue():Co(o)}else this[ie]=!0}}else{let a,l,c=()=>{if(a===void 0||l===void 0)return;let h=Math.max(a.length,l.length);h===0||e===1/0?this[ie]=!0:this[Ue]=a[h-1],u.length=h;for(let d=0;d<h;d++){let g=a[d],p=l[d];u[d]=[this[U].keys&&g!==void 0?lr(g):void 0,this[U].values&&p!==void 0?lr(p):void 0]}Co(o)};this[U].keys||e<1/0?s.getAllKeys(i,e<1/0?e:void 0).onsuccess=h=>{a=h.target.result,c()}:(a=[],this.nextTick(c)),this[U].values?s.getAll(i,e<1/0?e:void 0).onsuccess=h=>{l=h.target.result,c()}:(l=[],this.nextTick(c))}o.onabort=()=>{n(o.error||new Error("aborted by user")),n=null},o.oncomplete=()=>{n(null,u),n=null}}_next(e){if(this[X].length>0){let[t,n]=this[X].shift();this.nextTick(e,null,t,n)}else if(this[ie])this.nextTick(e);else{let t=Math.min(100,this.limit-this.count);this[st]&&(this[st]=!1,t=1),this._nextv(t,_o,(n,i)=>{if(n)return e(n);this[X]=i,this._next(e)})}}_all(e,t){this[st]=!1;let n=this[X].splice(0,this[X].length),i=this.limit-this.count-n.length;if(i<=0)return this.nextTick(t,null,n);this._nextv(i,_o,(o,s)=>{if(o)return t(o);n.length>0&&(s=n.concat(s)),t(null,s)})}_seek(e,t){this[st]=!0,this[X]=[],this[ie]=!1,this[Ue]=void 0,this[oe]={...this[U]};let n;try{n=vo(this[U])}catch{this[ie]=!0;return}n!==null&&!n.includes(e)?this[ie]=!0:this[U].reverse?this[oe].lte=e:this[oe].gte=e}};To.Iterator=_n;function Co(r){typeof r.commit=="function"&&r.commit()}});var Bo=w((Lh,Ao)=>{"use strict";Ao.exports=function(e,t,n,i,o){if(i.limit===0)return e.nextTick(o);let s=e.db.transaction([t],"readwrite"),u=s.objectStore(t),a=0;s.oncomplete=function(){o()},s.onabort=function(){o(s.error||new Error("aborted by user"))};let l=u.openKeyCursor?"openKeyCursor":"openCursor",c=i.reverse?"prev":"next";u[l](n,c).onsuccess=function(h){let d=h.target.result;d&&(u.delete(d.key).onsuccess=function(){(i.limit<=0||++a<i.limit)&&d.continue()})}}});var No=w(ko=>{"use strict";var{AbstractLevel:yc}=En(),Fo=K(),mc=Eo(),{fromCallback:gc}=gt(),{Iterator:wc}=Io(),Lo=bn(),Ec=Bo(),xc=xn(),Oo="level-js-",St=Symbol("idb"),Cn=Symbol("namePrefix"),se=Symbol("location"),Tn=Symbol("version"),Re=Symbol("store"),Ot=Symbol("onComplete"),So=Symbol("promise"),dr=class extends yc{constructor(e,t,n){if(typeof t=="function"||typeof n=="function")throw new Fo("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});let{prefix:i,version:o,...s}=t||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},s),typeof e!="string")throw new Error("constructor requires a location string argument");this[se]=e,this[Cn]=i??Oo,this[Tn]=parseInt(o||1,10),this[St]=null}get location(){return this[se]}get namePrefix(){return this[Cn]}get version(){return this[Tn]}get db(){return this[St]}get type(){return"browser-level"}_open(e,t){let n=indexedDB.open(this[Cn]+this[se],this[Tn]);n.onerror=function(){t(n.error||new Error("unknown error"))},n.onsuccess=()=>{this[St]=n.result,t()},n.onupgradeneeded=i=>{let o=i.target.result;o.objectStoreNames.contains(this[se])||o.createObjectStore(this[se])}}[Re](e){return this[St].transaction([this[se]],e).objectStore(this[se])}[Ot](e,t){let n=e.transaction;n.onabort=function(){t(n.error||new Error("aborted by user"))},n.oncomplete=function(){t(null,e.result)}}_get(e,t,n){let i=this[Re]("readonly"),o;try{o=i.get(e)}catch(s){return this.nextTick(n,s)}this[Ot](o,function(s,u){if(s)return n(s);if(u===void 0)return n(new Fo("Entry not found",{code:"LEVEL_NOT_FOUND"}));n(null,Lo(u))})}_getMany(e,t,n){let i=this[Re]("readonly"),o=e.map(s=>u=>{let a;try{a=i.get(s)}catch(l){return u(l)}a.onsuccess=()=>{let l=a.result;u(null,l===void 0?l:Lo(l))},a.onerror=l=>{l.stopPropagation(),u(a.error)}});mc(o,16,n)}_del(e,t,n){let i=this[Re]("readwrite"),o;try{o=i.delete(e)}catch(s){return this.nextTick(n,s)}this[Ot](o,n)}_put(e,t,n,i){let o=this[Re]("readwrite"),s;try{s=o.put(t,e)}catch(u){return this.nextTick(i,u)}this[Ot](s,i)}_iterator(e){return new wc(this,this[se],e)}_batch(e,t,n){let i=this[Re]("readwrite"),o=i.transaction,s=0,u;o.onabort=function(){n(u||o.error||new Error("aborted by user"))},o.oncomplete=function(){n()};function a(){let l=e[s++],c=l.key,h;try{h=l.type==="del"?i.delete(c):i.put(l.value,c)}catch(d){u=d,o.abort();return}s<e.length?h.onsuccess=a:typeof o.commit=="function"&&o.commit()}a()}_clear(e,t){let n,i;try{n=xc(e)}catch{return this.nextTick(t)}if(e.limit>=0)return Ec(this,this[se],n,e,t);try{let o=this[Re]("readwrite");i=n?o.delete(n):o.clear()}catch(o){return this.nextTick(t,o)}this[Ot](i,t)}_close(e){this[St].close(),this.nextTick(e)}};dr.destroy=function(r,e,t){typeof e=="function"&&(t=e,e=Oo),t=gc(t,So);let n=indexedDB.deleteDatabase(e+r);return n.onsuccess=function(){t()},n.onerror=function(i){t(i)},t[So]};ko.BrowserLevel=dr});var Ro=w(Uo=>{Uo.Level=No().BrowserLevel});var bc={};An(bc,{LevelBlockstore:()=>In});var De={};An(De,{abortedError:()=>Wo,closeFailedError:()=>Go,deleteFailedError:()=>kn,getFailedError:()=>Yo,hasFailedError:()=>Ho,notFoundError:()=>Nt,openFailedError:()=>zo,putFailedError:()=>On});var Q=pr(Sn(),1);function zo(r){return r=r??new Error("Open failed"),(0,Q.default)(r,"ERR_OPEN_FAILED")}function Go(r){return r=r??new Error("Close failed"),(0,Q.default)(r,"ERR_CLOSE_FAILED")}function On(r){return r=r??new Error("Put failed"),(0,Q.default)(r,"ERR_PUT_FAILED")}function Yo(r){return r=r??new Error("Get failed"),(0,Q.default)(r,"ERR_GET_FAILED")}function kn(r){return r=r??new Error("Delete failed"),(0,Q.default)(r,"ERR_DELETE_FAILED")}function Ho(r){return r=r??new Error("Has failed"),(0,Q.default)(r,"ERR_HAS_FAILED")}function Nt(r){return r=r??new Error("Not Found"),(0,Q.default)(r,"ERR_NOT_FOUND")}function Wo(r){return r=r??new Error("Aborted"),(0,Q.default)(r,"ERR_ABORTED")}var ue=class{has(e,t){return Promise.reject(new Error(".has is not implemented"))}put(e,t,n){return Promise.reject(new Error(".put is not implemented"))}async*putMany(e,t){for await(let{cid:n,block:i}of e)await this.put(n,i,t),yield n}get(e,t){return Promise.reject(new Error(".get is not implemented"))}async*getMany(e,t){for await(let n of e)yield{cid:n,block:await this.get(n,t)}}async delete(e,t){await Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(e,t){for await(let n of e)await this.delete(n,t),yield n}async*getAll(e){throw new Error(".getAll is not implemented")}};var Tc=new Uint8Array(0);function Nn(r,e){if(r===e)return!0;if(r.byteLength!==e.byteLength)return!1;for(let t=0;t<r.byteLength;t++)if(r[t]!==e[t])return!1;return!0}function Ee(r){if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")}function Jo(r,e){if(r.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<r.length;i++){var o=r.charAt(i),s=o.charCodeAt(0);if(t[s]!==255)throw new TypeError(o+" is ambiguous");t[s]=i}var u=r.length,a=r.charAt(0),l=Math.log(u)/Math.log(256),c=Math.log(256)/Math.log(u);function h(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var y=0,b=0,v=0,I=p.length;v!==I&&p[v]===0;)v++,y++;for(var R=(I-v)*c+1>>>0,C=new Uint8Array(R);v!==I;){for(var j=p[v],M=0,L=R-1;(j!==0||M<b)&&L!==-1;L--,M++)j+=256*C[L]>>>0,C[L]=j%u>>>0,j=j/u>>>0;if(j!==0)throw new Error("Non-zero carry");b=M,v++}for(var D=R-b;D!==R&&C[D]===0;)D++;for(var Me=a.repeat(y);D<R;++D)Me+=r.charAt(C[D]);return Me}function d(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;var y=0;if(p[y]!==" "){for(var b=0,v=0;p[y]===a;)b++,y++;for(var I=(p.length-y)*l+1>>>0,R=new Uint8Array(I);p[y];){var C=t[p.charCodeAt(y)];if(C===255)return;for(var j=0,M=I-1;(C!==0||j<v)&&M!==-1;M--,j++)C+=u*R[M]>>>0,R[M]=C%256>>>0,C=C/256>>>0;if(C!==0)throw new Error("Non-zero carry");v=j,y++}if(p[y]!==" "){for(var L=I-v;L!==I&&R[L]===0;)L++;for(var D=new Uint8Array(b+(I-L)),Me=b;L!==I;)D[Me++]=R[L++];return D}}}function g(p){var y=d(p);if(y)return y;throw new Error(`Non-${e} character`)}return{encode:h,decodeUnsafe:d,decode:g}}var Xo=Jo,Qo=Xo,Un=Qo;var yr=class{name;prefix;baseEncode;constructor(e,t,n){this.name=e,this.prefix=t,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},mr=class{name;prefix;baseDecode;prefixCodePoint;constructor(e,t,n){if(this.name=e,this.prefix=t,t.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Rn(this,e)}},gr=class{decoders;constructor(e){this.decoders=e}or(e){return Rn(this,e)}decode(e){let t=e[0],n=this.decoders[t];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Rn(r,e){return new gr({...r.decoders??{[r.prefix]:r},...e.decoders??{[e.prefix]:e}})}var wr=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(e,t,n,i){this.name=e,this.prefix=t,this.baseEncode=n,this.baseDecode=i,this.encoder=new yr(e,t,n),this.decoder=new mr(e,t,i)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Mn({name:r,prefix:e,encode:t,decode:n}){return new wr(r,e,t,n)}function Er({name:r,prefix:e,alphabet:t}){let{encode:n,decode:i}=Un(t,r);return Mn({prefix:e,name:r,encode:n,decode:o=>Ee(i(o))})}function Zo(r,e,t,n){let i={};for(let c=0;c<e.length;++c)i[e[c]]=c;let o=r.length;for(;r[o-1]==="=";)--o;let s=new Uint8Array(o*t/8|0),u=0,a=0,l=0;for(let c=0;c<o;++c){let h=i[r[c]];if(h===void 0)throw new SyntaxError(`Non-${n} character`);a=a<<t|h,u+=t,u>=8&&(u-=8,s[l++]=255&a>>u)}if(u>=t||255&a<<8-u)throw new SyntaxError("Unexpected end of data");return s}function es(r,e,t){let n=e[e.length-1]==="=",i=(1<<t)-1,o="",s=0,u=0;for(let a=0;a<r.length;++a)for(u=u<<8|r[a],s+=8;s>t;)s-=t,o+=e[i&u>>s];if(s!==0&&(o+=e[i&u<<t-s]),n)for(;o.length*t&7;)o+="=";return o}function A({name:r,prefix:e,bitsPerChar:t,alphabet:n}){return Mn({prefix:e,name:r,encode(i){return es(i,n,t)},decode(i){return Zo(i,n,t,r)}})}var ce=A({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Dn=A({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Oc=A({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),kc=A({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Nc=A({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Uc=A({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Rc=A({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Mc=A({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Dc=A({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var $=Er({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),qc=Er({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ts=qn,Pn=128,rs=127,ns=~rs,is=Math.pow(2,31);function qn(r,e,t){e=e||[],t=t||0;for(var n=t;r>=is;)e[t++]=r&255|Pn,r/=128;for(;r&ns;)e[t++]=r&255|Pn,r>>>=7;return e[t]=r|0,qn.bytes=t-n+1,e}var os=xr,ss=128,Vn=127;function xr(r,n){var t=0,n=n||0,i=0,o=n,s,u=r.length;do{if(o>=u)throw xr.bytes=0,new RangeError("Could not decode varint");s=r[o++],t+=i<28?(s&Vn)<<i:(s&Vn)*Math.pow(2,i),i+=7}while(s>=ss);return xr.bytes=o-n,t}var us=Math.pow(2,7),cs=Math.pow(2,14),fs=Math.pow(2,21),hs=Math.pow(2,28),as=Math.pow(2,35),ls=Math.pow(2,42),ds=Math.pow(2,49),ps=Math.pow(2,56),ys=Math.pow(2,63),ms=function(r){return r<us?1:r<cs?2:r<fs?3:r<hs?4:r<as?5:r<ls?6:r<ds?7:r<ps?8:r<ys?9:10},gs={encode:ts,decode:os,encodingLength:ms},ws=gs,ut=ws;function ct(r,e=0){return[ut.decode(r,e),ut.decode.bytes]}function Pe(r,e,t=0){return ut.encode(r,e,t),e}function Ve(r){return ut.encodingLength(r)}function $n(r,e){let t=e.byteLength,n=Ve(r),i=n+Ve(t),o=new Uint8Array(i+t);return Pe(r,o,0),Pe(t,o,n),o.set(e,i),new qe(r,t,e,o)}function ft(r){let e=Ee(r),[t,n]=ct(e),[i,o]=ct(e.subarray(n)),s=e.subarray(n+o);if(s.byteLength!==i)throw new Error("Incorrect length");return new qe(t,i,s,e)}function Kn(r,e){if(r===e)return!0;{let t=e;return r.code===t.code&&r.size===t.size&&t.bytes instanceof Uint8Array&&Nn(r.bytes,t.bytes)}}var qe=class{code;size;digest;bytes;constructor(e,t,n,i){this.code=e,this.size=t,this.digest=n,this.bytes=i}};function zn(r,e){let{bytes:t,version:n}=r;switch(n){case 0:return xs(t,vr(r),e??$.encoder);default:return bs(t,vr(r),e??ce.encoder)}}var Gn=new WeakMap;function vr(r){let e=Gn.get(r);if(e==null){let t=new Map;return Gn.set(r,t),t}return e}var at=class r{code;version;multihash;bytes;"/";constructor(e,t,n,i){this.code=t,this.version=e,this.multihash=n,this.bytes=i,this["/"]=i}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==ht)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==vs)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return r.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,n=$n(e,t);return r.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return r.equals(this,e)}static equals(e,t){let n=t;return n!=null&&e.code===n.code&&e.version===n.version&&Kn(e.multihash,n.multihash)}toString(e){return zn(this,e)}toJSON(){return{"/":zn(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;let t=e;if(t instanceof r)return t;if(t["/"]!=null&&t["/"]===t.bytes||t.asCID===t){let{version:n,code:i,multihash:o,bytes:s}=t;return new r(n,i,o,s??Yn(n,i,o.bytes))}else if(t[_s]===!0){let{version:n,multihash:i,code:o}=t,s=ft(i);return r.create(n,o,s)}else return null}static create(e,t,n){if(typeof t!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(t!==ht)throw new Error(`Version 0 CID must use dag-pb (code: ${ht}) block encoding`);return new r(e,t,n,n.bytes)}case 1:{let i=Yn(e,t,n.bytes);return new r(e,t,n,i)}default:throw new Error("Invalid version")}}static createV0(e){return r.create(0,ht,e)}static createV1(e,t){return r.create(1,e,t)}static decode(e){let[t,n]=r.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return t}static decodeFirst(e){let t=r.inspectBytes(e),n=t.size-t.multihashSize,i=Ee(e.subarray(n,n+t.multihashSize));if(i.byteLength!==t.multihashSize)throw new Error("Incorrect length");let o=i.subarray(t.multihashSize-t.digestSize),s=new qe(t.multihashCode,t.digestSize,o,i);return[t.version===0?r.createV0(s):r.createV1(t.codec,s),e.subarray(t.size)]}static inspectBytes(e){let t=0,n=()=>{let[h,d]=ct(e.subarray(t));return t+=d,h},i=n(),o=ht;if(i===18?(i=0,t=0):o=n(),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let s=t,u=n(),a=n(),l=t+a,c=l-s;return{version:i,codec:o,multihashCode:u,digestSize:a,multihashSize:c,size:l}}static parse(e,t){let[n,i]=Es(e,t),o=r.decode(i);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return vr(o).set(n,e),o}};function Es(r,e){switch(r[0]){case"Q":{let t=e??$;return[$.prefix,t.decode(`${$.prefix}${r}`)]}case $.prefix:{let t=e??$;return[$.prefix,t.decode(r)]}case ce.prefix:{let t=e??ce;return[ce.prefix,t.decode(r)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[r[0],e.decode(r)]}}}function xs(r,e,t){let{prefix:n}=t;if(n!==$.prefix)throw Error(`Cannot string encode V0 in ${t.name} encoding`);let i=e.get(n);if(i==null){let o=t.encode(r).slice(1);return e.set(n,o),o}else return i}function bs(r,e,t){let{prefix:n}=t,i=e.get(n);if(i==null){let o=t.encode(r);return e.set(n,o),o}else return i}var ht=112,vs=18;function Yn(r,e,t){let n=Ve(r),i=n+Ve(e),o=new Uint8Array(i+t.byteLength);return Pe(r,o,0),Pe(e,o,n),o.set(t,i),o}var _s=Symbol.for("@ipld/js-cid/CID");var _r=85;var O=pr(Zn(),1);var ei=A({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cf=A({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),ff=A({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),hf=A({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});O.default.formatters.b=r=>r==null?"undefined":$.baseEncode(r);O.default.formatters.t=r=>r==null?"undefined":ce.baseEncode(r);O.default.formatters.m=r=>r==null?"undefined":ei.baseEncode(r);O.default.formatters.p=r=>r==null?"undefined":r.toString();O.default.formatters.c=r=>r==null?"undefined":r.toString();O.default.formatters.k=r=>r==null?"undefined":r.toString();O.default.formatters.a=r=>r==null?"undefined":r.toString();function Rs(r){let e=()=>{};return e.enabled=!1,e.color="",e.diff=0,e.log=()=>{},e.namespace=r,e.destroy=()=>!0,e.extend=()=>e,e}function ti(r){let e=Rs(`${r}:trace`);return O.default.enabled(`${r}:trace`)&&O.default.names.map(t=>t.toString()).find(t=>t.includes(":trace"))!=null&&(e=(0,O.default)(`${r}:trace`)),Object.assign((0,O.default)(r),{error:(0,O.default)(`${r}:error`),trace:e})}var jf=ti("blockstore:core:tiered");var ze={...De};var Mo=pr(Ro(),1);var In=class extends ue{db;opts;base;constructor(e,t={}){super(),this.db=typeof e=="string"?new Mo.Level(e,{...t,keyEncoding:"utf8",valueEncoding:"view"}):e,this.opts={createIfMissing:!0,compression:!1,...t},this.base=t.base??Dn}#e(e){return`/${this.base.encoder.encode(e.multihash.bytes)}`}#t(e){return at.createV1(_r,ft(this.base.decoder.decode(e.substring(1))))}async open(){try{await this.db.open(this.opts)}catch(e){throw ze.openFailedError(e)}}async put(e,t){try{return await this.db.put(this.#e(e),t),e}catch(n){throw ze.putFailedError(n)}}async get(e){let t;try{t=await this.db.get(this.#e(e))}catch(n){throw n.notFound!=null?ze.notFoundError(n):ze.getFailedError(n)}return t}async has(e){try{await this.db.get(this.#e(e))}catch(t){if(t.notFound!=null)return!1;throw t}return!0}async delete(e){try{await this.db.del(this.#e(e))}catch(t){throw ze.deleteFailedError(t)}}async close(){await this.db.close()}async*getAll(e){for await(let{key:t,value:n}of this.#r({values:!0}))yield{cid:this.#t(t),block:n}}async*#r(e){let t={keys:!0,keyEncoding:"buffer",values:e.values};if(e.prefix!=null){let i=e.prefix.toString();t.gte=i,t.lt=i+"\xFF"}let n=this.db.iterator(t);try{for await(let[i,o]of n)yield{key:new TextDecoder().decode(i),value:o}}finally{await n.close()}}};return $o(bc);})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

run-parallel-limit/index.js:
  (*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
return BlockstoreLevel}));
