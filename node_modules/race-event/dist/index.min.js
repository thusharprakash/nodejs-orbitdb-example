(function (root, factory) {(typeof module === 'object' && module.exports) ? module.exports = factory() : root.RaceEvent = factory()}(typeof self !== 'undefined' ? self : this, function () {
"use strict";var RaceEvent=(()=>{var c=Object.defineProperty;var L=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var u=Object.prototype.hasOwnProperty;var f=(r,e)=>{for(var t in e)c(r,t,{get:e[t],enumerable:!0})},h=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of b(e))!u.call(r,o)&&o!==t&&c(r,o,{get:()=>e[o],enumerable:!(n=L(e,o))||n.enumerable});return r};var p=r=>h(c({},"__esModule",{value:!0}),r);var w={};f(w,{AbortError:()=>s,raceEvent:()=>m});var s=class extends Error{type;code;constructor(e,t){super(e??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=t??"ABORT_ERR"}};async function m(r,e,t,n){let o=new s(n?.errorMessage,n?.errorCode);return t?.aborted===!0?Promise.reject(o):new Promise((v,E)=>{let i=d=>{n?.filter?.(d)!==!1&&(r.removeEventListener(e,i),t?.removeEventListener("abort",a),v(d))},a=()=>{r.removeEventListener(e,i),t?.removeEventListener("abort",a),E(o)};r.addEventListener(e,i),t?.addEventListener("abort",a)})}return p(w);})();
return RaceEvent}));
